<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arashâ€™s Dynamic Cannon</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      overflow: hidden;
      font-family: 'Segoe UI', sans-serif;
      color: white;
      background: radial-gradient(circle at top left, #0a0a0a, #000);
    }

    #canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
    }

    #calcButton {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255,255,255,0.1);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.3);
      border-radius: 10px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      backdrop-filter: blur(10px);
      transition: 0.3s;
    }
    #calcButton:hover {
      background: rgba(255,255,255,0.2);
    }

    #calculator {
      display: none;
      position: fixed;
      right: 20px;
      top: 70px;
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 15px;
      backdrop-filter: blur(12px);
      padding: 20px;
      width: 260px;
      color: white;
      box-shadow: 0 0 20px rgba(0,0,0,0.5);
    }
    #calculator input {
      width: 100%;
      padding: 10px;
      font-size: 18px;
      background: rgba(255,255,255,0.1);
      border: none;
      color: white;
      border-radius: 8px;
      margin-bottom: 10px;
    }
    #calculator button {
      width: 60px;
      height: 50px;
      margin: 5px;
      font-size: 18px;
      border: none;
      border-radius: 8px;
      background: rgba(255,255,255,0.1);
      color: white;
      cursor: pointer;
      transition: 0.3s;
    }
    #calculator button:hover {
      background: rgba(255,255,255,0.3);
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <button id="calcButton">ðŸ§® Calculator</button>

  <div id="calculator">
    <input type="text" id="display" disabled>
    <div>
      <button onclick="appendValue('7')">7</button>
      <button onclick="appendValue('8')">8</button>
      <button onclick="appendValue('9')">9</button>
      <button onclick="appendValue('/')">Ã·</button>
    </div>
    <div>
      <button onclick="appendValue('4')">4</button>
      <button onclick="appendValue('5')">5</button>
      <button onclick="appendValue('6')">6</button>
      <button onclick="appendValue('*')">Ã—</button>
    </div>
    <div>
      <button onclick="appendValue('1')">1</button>
      <button onclick="appendValue('2')">2</button>
      <button onclick="appendValue('3')">3</button>
      <button onclick="appendValue('-')">âˆ’</button>
    </div>
    <div>
      <button onclick="appendValue('0')">0</button>
      <button onclick="appendValue('.')">.</button>
      <button onclick="calculate()">=</button>
      <button onclick="appendValue('+')">+</button>
    </div>
    <div>
      <button style="width: 95%" onclick="clearDisplay()">C</button>
    </div>
  </div>

  <script>
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    let W = window.innerWidth, H = window.innerHeight;
    canvas.width = W; canvas.height = H;

    // Physics settings
    const gravity = 0.4;
    const friction = 0.99;

    let cannon = { x: 100, y: H - 100, angle: 0 };
    let balls = [];

    // Handle window resize
    window.addEventListener('resize', () => {
      W = window.innerWidth; H = window.innerHeight;
      canvas.width = W; canvas.height = H;
      cannon.y = H - 100;
    });

    // Handle mouse aiming and shooting
    let mouse = { x: 0, y: 0 };
    window.addEventListener('mousemove', e => {
      mouse.x = e.clientX;
      mouse.y = e.clientY;
      cannon.angle = Math.atan2(mouse.y - cannon.y, mouse.x - cannon.x);
    });
    window.addEventListener('click', () => shoot());

    function shoot() {
      const speed = 20;
      const vx = Math.cos(cannon.angle) * speed;
      const vy = Math.sin(cannon.angle) * speed;
      balls.push({
        x: cannon.x + 80 * Math.cos(cannon.angle),
        y: cannon.y + 80 * Math.sin(cannon.angle),
        vx: vx,
        vy: vy,
        r: 12,
        life: 1
      });
    }

    function drawCannon() {
      ctx.save();
      ctx.translate(cannon.x, cannon.y);
      ctx.rotate(cannon.angle);
      ctx.fillStyle = '#0ff';
      ctx.shadowBlur = 20;
      ctx.shadowColor = '#0ff';
      ctx.fillRect(0, -10, 80, 20);
      ctx.restore();

      ctx.beginPath();
      ctx.arc(cannon.x, cannon.y, 25, 0, Math.PI * 2);
      ctx.fillStyle = '#222';
      ctx.shadowBlur = 10;
      ctx.shadowColor = '#0ff';
      ctx.fill();
    }

    function drawBalls() {
      for (let i = 0; i < balls.length; i++) {
        const b = balls[i];
        b.x += b.vx;
        b.y += b.vy;
        b.vy += gravity;
        b.vx *= friction;
        b.vy *= friction;

        // bounce on ground
        if (b.y + b.r > H) {
          b.y = H - b.r;
          b.vy *= -0.8;
          b.vx *= 0.8;
          // burst effect when velocity is small
          if (Math.abs(b.vy) < 2) {
            explode(b.x, b.y, b.r, '#0ff');
            balls.splice(i, 1);
            i--;
            continue;
          }
        }

        ctx.beginPath();
        ctx.arc(b.x, b.y, b.r, 0, Math.PI * 2);
        ctx.fillStyle = '#0ff';
        ctx.shadowBlur = 20;
        ctx.shadowColor = '#0ff';
        ctx.fill();
      }
    }

    let particles = [];
    function explode(x, y, r, color) {
      for (let i = 0; i < 25; i++) {
        particles.push({
          x: x, y: y,
          vx: (Math.random() - 0.5) * 10,
          vy: (Math.random() - 0.5) * 10,
          r: r / 3,
          alpha: 1,
          color: color
        });
      }
    }

    function drawParticles() {
      for (let i = 0; i < particles.length; i++) {
        const p = particles[i];
        p.x += p.vx;
        p.y += p.vy;
        p.vy += gravity * 0.2;
        p.alpha -= 0.02;
        if (p.alpha <= 0) {
          particles.splice(i, 1);
          i--;
          continue;
        }
        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI * 2);
        ctx.fillStyle = `rgba(0,255,255,${p.alpha})`;
        ctx.shadowBlur = 15;
        ctx.shadowColor = p.color;
        ctx.fill();
      }
    }

    function animate() {
      ctx.clearRect(0, 0, W, H);
      drawCannon();
      drawBalls();
      drawParticles();
      requestAnimationFrame(animate);
    }

    animate();

    // --- Calculator logic ---
    const calc = document.getElementById('calculator');
    document.getElementById('calcButton').onclick = () => {
      calc.style.display = calc.style.display === 'none' ? 'block' : 'none';
    };

    const display = document.getElementById('display');
    function appendValue(v) { display.value += v; }
    function clearDisplay() { display.value = ''; }
    function calculate() {
      try { display.value = eval(display.value); }
      catch { display.value = 'Error'; }
    }
  </script>
</body>
</html>
